(function(t){function e(e){for(var o,l,r=e[0],c=e[1],s=e[2],d=0,f=[];d<r.length;d++)l=r[d],i[l]&&f.push(i[l][0]),i[l]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(o=!1)}o&&(a.splice(e--,1),t=l(l.s=n[0]))}return t}var o={},i={app:0},a=[];function l(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=o,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var s=0;s<r.length;s++)e(r[s]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"15a9":function(t,e,n){"use strict";var o=n("f6ff"),i=n.n(o);i.a},2752:function(t,e,n){"use strict";var o=n("62d7"),i=n.n(o);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],l={name:"app",created:function(){}},r=l,c=(n("5c0b"),n("2877")),s=Object(c["a"])(r,i,a,!1,null,null,null),u=s.exports,d=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-aside",{staticClass:"aside",attrs:{width:"200px"}},[n("el-menu",{attrs:{"background-color":"coral","text-color":"white","active-text-color":"#ffd04b","default-active":"1"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"1"}},[t._v("公告管理")]),n("el-menu-item",{attrs:{index:"2"}},[t._v("失物招领管理")]),n("el-menu-item",{attrs:{index:"3"}},[t._v("寻物启事管理")]),n("el-menu-item",{attrs:{index:"4"}},[t._v("寻人启事管理")]),n("el-menu-item",{attrs:{index:"5"}},[t._v("用户管理")])],1)],1),n("el-main",[n("router-view")],1)],1)},p=[],g=n("7618"),m=n("cebc"),h=n("2f62"),v={name:"home",data:function(){return{active:1}},computed:Object(m["a"])({},Object(h["b"])({isLogin:"isLogin"})),methods:{handleSelect:function(t,e){switch(t!==this.active&&(this.active=t),console.log(t,e),console.log(Object(g["a"])(t)),t){case"1":this.$router.push("/notice"),console.log("pushed");break}}}},b=v,_=(n("2752"),Object(c["a"])(b,f,p,!1,null,"313ca858",null)),y=_.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticClass:"login-form",attrs:{type:"flex",justify:"center",align:"middle"}},[n("el-col",{attrs:{span:8}},[n("el-card",[n("el-form",{attrs:{model:t.loginModel}},[n("el-form-item",{attrs:{label:"账号"}},[n("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.loginModel.login,callback:function(e){t.$set(t.loginModel,"login",e)},expression:"loginModel.login"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.loginModel.password,callback:function(e){t.$set(t.loginModel,"password",e)},expression:"loginModel.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.login()}}},[t._v("登陆")])],1)],1)],1)],1)],1)},x=[],$=n("bc3a"),j=n.n($),O=n("4328"),M=n.n(O);function S(t){return t.then(function(t){return 200===t.data.code?Promise.resolve(t.data.data):Promise.reject(t.data)},t.reject)}j.a.defaults.headers.common["Content-Type"]="application/json",j.a.defaults.withCredentials=!0,j.a.defaults.baseURL="http://198.13.50.56";var k={user:{login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"admin";return S(j.a.post("/user/login",M.a.stringify({login:t,password:e,role:n})))},register:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return S(j.a.post("/user/register",M.a.stringify({login:t,password:n,email:o,nickname:e})))}},post:{get_lost_post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return S(j.a.get("/post",{params:{page:t,per_page:e,type:"lost"}}))},get_found_post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return S(j.a.get("/post",{params:{page:t,per_page:e,type:"found"}}))},get_people_post:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return S(j.a.get("/post",{params:{page:t,per_page:e,type:"people"}}))},get_post:function(t){return S(j.a.get("/post/"+t))},delete_post:function(t){return S(j.a.delete("/post/"+t))}},notice:{get_all_notice:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return S(j.a.get("/notice"))},get_notice:function(t){return S(j.a.get("/notice"+t))},delete_notice:function(t){return S(j.a.delete("/notice/"+t))},post_notice:function(t,e){return S(j.a.post("/notice",{title:t,content:e}))},put_notice:function(t,e,n){return S(j.a.put("/notice/"+t,{title:e,content:n}))}}},E=k,D="UPDATE_USER",Y="USER",N={name:"login",data:function(){return{loginModel:{login:"",password:""}}},methods:{login:function(){var t=this;console.log("login"),E.user.login(this.loginModel.login,this.loginModel.password).then(function(e){console.log("data ->",e),t.$store.commit(D,e),t.$message.success("登陆成功"),t.$router.push({name:"home"})}).catch(function(e){401===e.code&&t.$message.error("用户名或密码不正确"),console.log(e)})}}},P=N,C=(n("15a9"),Object(c["a"])(P,w,x,!1,null,"1e03cf3e",null)),L=C.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticClass:"opera",attrs:{type:"flex",justify:"start"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.createNotice}},[t._v("新增")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"日期",prop:"updated_time",width:"180"}}),n("el-table-column",{attrs:{label:"标题",prop:"title",width:"180"}}),n("el-table-column",{attrs:{label:"内容",prop:"content",width:"240"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.deletcNotice(e.$index)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.visible},on:{"update:visible":function(e){return t.$set(t.dialog,"visible",e)}}},[n("el-form",{attrs:{model:t.notice}},[n("el-form-item",{attrs:{label:"标题"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.notice.title,callback:function(e){t.$set(t.notice,"title",e)},expression:"notice.title"}})],1),n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.notice.content,callback:function(e){t.$set(t.notice,"content",e)},expression:"notice.content"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.noticeFormVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleCommit(t.notice)}}},[t._v("确 定")])],1)],1)],1)},H=[],J=n("5a0c"),T=n.n(J),R={name:"notice",data:function(){return{tableData:[],notice:{id:null,title:"",content:""},dialog:{visible:!1,currentEdit:-1,title:""}}},mounted:function(){this.getNotices()},methods:{handleEdit:function(t,e){this.notice=JSON.parse(JSON.stringify(e)),this.dialog.currentEdit=t,this.dialog.visible=!0,this.dialog.title="修改公告"},getNotices:function(){var t=this;E.notice.get_all_notice().then(function(e){console.log(e);for(var n=0;n<e.length;n++)e[n].updated_time=T()(1e3*e[n].updated_time).format("YYYY-MM-DD HH:mm:ss");t.$set(t,"tableData",e)}).catch(function(t){console.log(t)})},deletcNotice:function(t){var e=this;E.notice.delete_notice(t).then(function(n){console.log(n),e.tableData.splice(t,1),e.$message.success("删除成功")}).catch(function(t){console.log(t),e.$message.error("删除失败")})},createNotice:function(){this.notice={title:"",content:""},this.dialog.currentEdit=-1,this.dialog.visible=!0,this.dialog.title="发布公告"},post_notice:function(t){var e=this;E.notice.post_notice(t.title,t.content).then(function(t){t.updated_time=T()(1e3*t.updated_time).format("YYYY-MM-DD HH:mm:ss"),e.tableData.unshift(t),e.$message.success("修改成功")}).catch(function(t){console.error(t),e.$message.error("修改失败")}).then(function(){e.dialog.visible=!1})},put_notice:function(t){var e=this;E.notice.put_notice(t.id,t.title,t.content).then(function(t){t.updated_time=T()(1e3*t.updated_time).format("YYYY-MM-DD HH:mm:ss"),e.$set(e.tableData,e.currentEdit,t),e.$message.success("修改成功")}).catch(function(t){console.error(t),e.$message.success("修改失败")}).then(function(){e.dialog.visible=!1})},handleCommit:function(t){-1!==this.currentEdit?this.put_notice(t):this.post_notice(t)}}},z=R,I=(n("d067"),Object(c["a"])(z,U,H,!1,null,"2b656b60",null)),A=I.exports;o["default"].use(d["a"]);var F=new d["a"]({routes:[{path:"/",name:"home",component:y,children:[{path:"",component:A},{path:"/notice",name:"notice",component:A}]},{path:"/login",name:"login",component:L}]}),V=F,q=n("bd86");o["default"].use(h["a"]);var B=new h["a"].Store({state:{isLogin:!1,user:{}},mutations:Object(q["a"])({},D,function(t,e){console.log(D,e),t.user=e,localStorage.setItem(Y,JSON.stringify(e)),t.isLogin=!0}),actions:{loadUser:function(t){console.log("loadUser",t);var e=JSON.parse(localStorage.getItem(Y));null!==e&&t.commit(D,e)}}}),G=n("5c96"),K=n.n(G);n("0fae"),n("e9ff");o["default"].use(K.a),o["default"].config.productionTip=!1,B.dispatch("loadUser"),V.beforeEach(function(t,e,n){console.log("to -> ",t),console.log("login state ",B.state.isLogin),"/login"!==t.fullPath&&!1===B.state.isLogin?n("/login"):n()}),new o["default"]({router:V,store:B,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("5e27"),i=n.n(o);i.a},"5e27":function(t,e,n){},"62d7":function(t,e,n){},aee5:function(t,e,n){},d067:function(t,e,n){"use strict";var o=n("aee5"),i=n.n(o);i.a},e9ff:function(t,e,n){},f6ff:function(t,e,n){}});
//# sourceMappingURL=app.73751eab.js.map